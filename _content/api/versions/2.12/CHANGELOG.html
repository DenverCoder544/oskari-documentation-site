<h1 class=>Oskari API changelog</h1><p>This document describes changes to the public API from Oskari frontend perspective (requests, events, conf/state, services). RPC-developers can check if the request/event API has changed
when the service provider gives notice about Oskari version being upgraded. Oskari bundle/core-developers can check for changes in the bundles they depend on.</p>
<p>Each addition is tagged with [add], [mod], [rem] telling if it&#39;s a new feature, modifies the current functionality or if something has been removed.</p>
<p>Some extra tags:</p>
<ul>
<li>[rpc] tag indicates that the change affects RPC API</li>
<li>[breaking] tag indicates that the change is not backwards compatible</li>
</ul>
<h2 class=>2.11.0</h2><h3 class=mod> AddMapLayerRequest</h3><p>The layer is no longer added to map synchronously. Additional metadata is loaded from the server when a layer is added to map so sending additional requests directly after sending <code>AddMapLayerRequest</code> might not work as they did before.</p>
<p>Introduced a second parameter for the request called <code>options</code>. This is used to restore vector layer styles on embedded maps for guest users in a way the user that published the map sees them on the publisher functionality. It can also be used to trigger <code>MapModulePlugin.MapMoveByLayerContentRequest</code> after the layer has been added to map (workaround for asynchronous operation).</p>
<h3 class=mod> ShowFilteredLayerListRequest</h3><p>Added third parameter to open the selected layer listing directly.</p>
<h2 class=>2.10.0</h2><h3 class=rem> MapResizeEnabledRequest</h3><p>Removed request that was not used or needed anymore. The request could be used for stopping mapmodule from auto-scaling its size when the element size changed, but the current implementation works in a similar way that you can set size of the map element to be different than the container it is in. This does the same thing.</p>
<h3 class=rem> MapSizeUpdateRequest</h3><p>Removed request that was not used or needed anymore now that mapmodule listens to the element size. The request was NOT used to set a new size like the name suggests, but to notify mapmodule about size change like it was an event. This should have been an event instead, but it&#39;s no longer required.</p>
<h3 class=rem> MapWindowFullScreenRequest</h3><p>Removed request that was not needed anymore now that mapmodule listens to the element size. The request was NOT used to set a new size for map like the name suggests, but to notify mapmodule about size change like it was an event. This should have been an event instead, but it&#39;s no longer required.</p>
<h2 class=>2.9.0</h2><h3 class=mod> <span class="label label-primary rpc">RPC</span> <span class="label label-primary breaking">NOT BACKWARDS COMPATIBLE</span> MapModulePlugin.AddMarkerRequest</h3><p>For built-in symbols everything stays the same.</p>
<p>For external graphic symbols in markers the size of the marker is:</p>
<ul>
<li>when below 10 is calculated as size * 10 + 40 for actual size (while hack&#39;ish this is for backwards compatibility reasons)</li>
<li>10 + values are now considered as a pixel value (as documented on the API page)</li>
</ul>
<h3 class=mod> <span class="label label-primary rpc">RPC</span> DrawTools.StartDrawingRequest</h3><p>Enabled modifying a geometry with a limited shape for <code>Circle</code>, <code>Box</code> and <code>Square</code>. Previously modifying a polygon shape was always done in a way that resulted in losing the original shape (new points could be added and individual points could be moved to skew the geometry). The previous method for editing is still available when using the shape <code>Polygon</code> to be used for editing.</p>
<p>Added an option to use a validation limit for length of a line and area of a polygon.
The <code>limits</code> can be set with options:</p>
<pre><code class="language-javascript">{
    ...,
    limits: {
        area: `number in m2 limiting area size`,
        length: `number in meters limiting line length`
    }
}
</code></pre>
<p>Changed to show self intersection warning for Polygons as in API documentation. Previously warning was shown only with showMeasureOnMap option.</p>
<h3 class=mod> <span class="label label-primary rpc">RPC</span> DrawingEvent</h3><p>Added valid property for GeoJson features. Used with <code>DrawTools.StartDrawingRequest</code> limits option.</p>
<h2 class=>2.8.0</h2><h3 class=add> <span class="label label-primary rpc">RPC</span> StateChangedEvent</h3><p>Event is sent when a massive application state change occurs like user clicks on the &quot;reset map to default&quot;.
This allows RPC-based apps to detect such occurance and re-add for example markers that they need after such reset.</p>
<h2 class=mod>2.7.0  <span class="label label-primary rpc">RPC</span> <span class="label label-primary breaking">NOT BACKWARDS COMPATIBLE</span> MapModulePlugin.AddMarkerRequest</h2><p>The size value is now considered as a pixel value instead of abstracted WHEN using external graphic for marker symbol.
For built-in symbols everything stays the same.</p>
<h2 class=>2.6.0</h2><h3 class=add> <span class="label label-primary rpc">RPC</span> MetadataSearchRequest</h3><p>Added new MetadataSearchRequest. This allows applications to do metadatasearch programmatically.</p>
<p>Find metadata for <code>tie</code> search.</p>
<pre><code class="language-javascript">const sb = Oskari.getSandbox();
sb.postRequestByName(&#39;MetadataSearchRequest&#39;, [{ search: &#39;tie&#39; }]);
</code></pre>
<h3 class=add> <span class="label label-primary rpc">RPC</span> MetadataSearchResultEvent</h3><p>Added new MetadataSearchResultEvent. This allows applications to get metadata search results.</p>
<p>Event returns following Object:</p>
<pre><code class="language-javascript">{
  &quot;success&quot;: true,
  &quot;results&quot;: [{
        &quot;identification&quot;:{
          &quot;date&quot;:&quot;2021-05-18&quot;,
          &quot;code&quot;:&quot;publication&quot;
        },
        &quot;natureofthetarget&quot;:&quot;dataset&quot;,
        &quot;bbox&quot;:{
            &quot;top&quot;:70.09229553,
            &quot;left&quot;:19.08317359,
            &quot;bottom&quot;:59.45414258,
            &quot;right&quot;:31.58672881
        },
        &quot;organization&quot;:&quot;Väylävirasto&quot;,
        &quot;name&quot;:&quot;Sillat (Taitorakennerekisteri)&quot;,
        &quot;rank&quot;:-1,
        &quot;id&quot;:&quot;cbfed29a-d47f-4b83-a9d0-e96c9a713a88&quot;,
        &quot;region&quot;:&quot;&quot;,
        &quot;geom&quot;:&quot;POLYGON ((51857.07752019336 6617351.758085947, 106162.23019201797 6611247.60914618, 160521.75747694494 6605934.9725185605, 214927.9837369584 6601413.041426821, 269373.3028919406 6597681.12401024, 323850.167285723 6594738.6457116045, 378351.0765369692 6592585.151240729, 432868.5663778016 6591220.306118018, 487395.1974830585 6590643.897801558, 541923.5442930857 6590855.836400321, 596446.1838329614 6591856.154975107, 650955.6845310468 6593645.009427913, 705444.5950397715 6596222.67797946, 759905.4330615391 6599589.560233721, 752439.279058465 6707120.567722377, 744900.8507702629 6814657.30555671, 737292.2963510042 6922199.658602795, 729615.7848563935 7029747.505094043, 721873.5056238836 7137300.716763376, 714067.6676445415 7244859.158983923, 706200.4989268251 7352422.690918106, 698274.2458524778 7459991.165674924, 690291.1725247321 7567564.430475263, 682253.5601090218 7675142.326825145, 674163.706166442 7782724.690696563, 637684.9819106762 7780262.600948358, 601176.4170921873 7778377.065625957, 564645.9381468832 7777068.247270706, 528101.4635005761 7776336.258280902, 491550.9064510594 7776181.161365283, 455002.17806454666 7776602.969796763, 418463.190078363 7777601.647466223, 381941.8578017532 7779177.108736253, 345446.1030066919 7781329.218095038, 308983.8568005678 7784057.789610645, 272563.0624726217 7787362.586186218, 236191.67830600997 7791243.318616742, 199877.68034737493 7795699.644448195, 185922.51974644407 7688636.614841255, 172055.50590313738 7581562.838070868, 158280.5546451786 7474477.904805448, 144601.5589337572 7367381.417439794, 131022.38783961348 7260272.990545034, 117546.88551808393 7153152.251308996, 104178.87018318352 7046018.839966641, 90922.13308078656 6938872.410219978, 77780.43746099574 6831712.629646971, 64757.51754980773 6724539.1800989425, 51857.07752019336 6617351.758085947))&quot;,
        &quot;channelId&quot;:&quot;METADATA_CATALOGUE_CHANNEL&quot;}
    ]
}
</code></pre>
<h3 class=add> <span class="label label-primary rpc">RPC</span> RearrangeSelectedMapLayerRequest</h3><p>Allowed request for rpc use and also added request documentation.</p>
<pre><code class="language-javascript">const layerId = 1;
const position = 0;
channel.postRequest(&#39;RearrangeSelectedMapLayerRequest&#39;, [layerId, position]);
</code></pre>
<h3 class=add> <span class="label label-primary rpc">RPC</span> ChangeMapLayerStyleRequest</h3><p>Allowed request for rpc use.</p>
<pre><code class="language-javascript">const layerId = 1;
const newStyleName = &#39;new_awesome_style&#39;;
channel.postRequest(&#39;ChangeMapLayerStyleRequest&#39;, [layerId, newStyleName]);
</code></pre>
<h3 class=add> <span class="label label-primary rpc">RPC</span> DataForMapLocationEvent</h3><p>Added new DataForMapLocationEvent. This allows applications to get programmatic access to the content that is normally shown on the map in an <code>infobox</code> popup when the user clicks the map (GFI/wfs feature clicks).</p>
<p>Event returns following Object:</p>
<pre><code class="language-javascript">{
  content: &quot;&lt;table&gt;&lt;tr&gt;&lt;td&gt;test&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;, // or json object
  x: 423424,
  y: 6652055,
  layerId: 1,
  type: &quot;text&quot; // or json or geojson
}
</code></pre>
<h3 class=mod> <span class="label label-primary rpc">RPC</span> getAllLayers</h3><p>The RPC <code>getAllLayers()</code> function now includes new properties: <code>config</code> and <code>metadataIdentifier</code>.</p>
<p>The <code>config</code> (layer <code>attributes</code> <code>data</code> block) object includes optional configuration like localized names for vector feature properties etc.</p>
<p>The <code>metadataIdentifier</code> string shows layers metadata identifier. If layer haven&#39;t metadata identifier, layer object not contains <code>metadataIdentifier</code> properties.</p>
<pre><code class="language-javascript">{
    id: layerId,
    opacity: layerOpacity,
    visible: layerVisibility,
    name : layerName,
    minZoom: minZoomLevel,
    maxZoom: maxZoomLevel,
    config: layerAttributesDataBlock,
    metadataIdentifier: metadataIdentifier
}
</code></pre>
<h3 class=mod> <span class="label label-primary rpc">RPC</span> SearchRequest and SearchResultEvent</h3><p>SearchRequest can now take an optional second parameter that is sent to the server side implementation. As the server side implementation are handled by different &quot;channels&quot; depending on the Oskari instance and implementation these options might or might not be handled. However the same options are returned on the SearchResultEvent enabling tracking which event is a response to which request making the functionality more versatile whether any extra flags are supported by the server instance or not. A common handling has been implemented for the key <code>limit</code> in the options to request more or less results than the instance default. Contact your Oskari instance administrator for options that are used by the server side on given instance.</p>
<h2 class=>2.5.0</h2><h3 class=add> userstyle</h3><p>Added initial bundle documentation. Userstyle functionality has been moved from wfsvector to own bundle.</p>
<h3 class=mod> MapModulePlugin.MapLayerUpdateRequest</h3><p>Added documentation for the request. The request itself has been available from 1.x already but the it wasn&#39;t documented.
Since 2.5 it can also be used to force reload of features from a service on a vector/WFS-layer.</p>
<h2 class=>2.4.0</h2><h3 class=rem> Removed unmaintained bundles</h3><p>Bundles layerselection2, layerselector2 and hierarchical-layerlist have been removed. Current replacement is the bundle: layerlist.
Bundles admin-layerselector and admin-hierarchical-layerlist have been removed. Current replacement is: admin-layereditor.</p>
<p>See <a href="https://github.com/oskariorg/oskari-docs/issues/245">https://github.com/oskariorg/oskari-docs/issues/245</a> for details.</p>
<h2 class=>2.3.0</h2><h3 class=add> layerlist</h3><p>Added initial bundle documentation.</p>
<h3 class=add> admin-layereditor</h3><p>Added initial bundle documentation.</p>
<h3 class=rem> mapwfs2</h3><p>Documentation removed as the code has been removed earlier. The WFS-layer implementation has been replaced with wfsvector bundle.</p>
<h3 class=rem> publisher</h3><p>Removed as the code has been replaced with publisher2 earlier.</p>
<h2 class=>2.1.0</h2><h3 class=mod> <span class="label label-primary rpc">RPC</span> ZoomToFeaturesRequest</h3><p>Now supports an optional maxZoomLevel flag to restrict the amount of zooming we are willing to make while showing the features. This is useful for point features or features that are close to each other. Without this the map might zoom &quot;all-in&quot; that might not be what we want to do.</p>
<h3 class=mod> <span class="label label-primary rpc">RPC</span> VectorLayerRequest</h3><p>Now can be used to remove vector layers that have been added with the same request. Can be used to cleanup etc.</p>
<h2 class=>1.55.0</h2><h3 class=add> <span class="label label-primary rpc">RPC</span> New SetTimeRequest Request</h3><p>Request to set time for 3d map.</p>
<p>date
Date as a string D/M</p>
<pre><code class="language-javascript">&#39;28/2&#39; || &#39;1/2&#39; || &#39;01/02&#39; || &#39;01/2&#39;
</code></pre>
<p>time
Time as a string H:m</p>
<pre><code class="language-javascript">&#39;10:22&#39; || &#39;9:02&#39;
</code></pre>
<p>year
Year as a number, defaults to current year (optional)</p>
<pre><code class="language-javascript">2019 || 2010
</code></pre>
<h3 class=mod> <span class="label label-primary rpc">RPC</span> AfterMapMoveEvent</h3><p>Event now includes details for camera position when using the 3D mapmodule</p>
<h2 class=>1.54.0</h2><h3 class=add> <span class="label label-primary rpc">RPC</span> New MapTourRequest Request</h3><p>Request to move along the map from point to point.</p>
<p>locations
List of locations as an array of objects.
Contains longitude, latitude and various optional override options</p>
<pre><code class="language-javascript">[ { lon, lat }, { lon, lat, duration, delay, zoom, camera: { heading, pitch, roll }, animation } ]
</code></pre>
<p>options
Object with optional parameters for options as default for all locations.</p>
<pre><code class="language-javascript">{ duration, delay, zoom, camera: { heading, pitch, roll }, animation, srsName }
</code></pre>
<h2 class=>1.53.0</h2><h3 class=mod> <span class="label label-primary rpc">RPC</span> MapMoveRequest</h3><p>Added fourth parameter &quot;options&quot;.</p>
<pre><code class="language-javascript">{ srsName, animation }
</code></pre>
<p><code>srsName</code>: The projection in which the given coordinates are
<code>animation</code>: Animation to use on map move. Possible values: <code>fly</code>, <code>pan</code>.</p>
<h3 class=mod> <span class="label label-primary rpc">RPC</span> StartUserLocationTrackingRequest</h3><p>Allowed request for rpc use.</p>
<h3 class=mod> <span class="label label-primary rpc">RPC</span> StopUserLocationTrackingRequest</h3><p>Allowed request for rpc use.</p>
<h2 class=>1.52.0</h2><h3 class=add> StartUserLocationTrackingRequest</h3><p>Request to show user&#39;s location on map.</p>
<h3 class=add> StopUserLocationTrackingRequest</h3><p>Request to stop user&#39;s location tracking.</p>
<h2 class=>1.51.0</h2><h4 class=mod> <span class="label label-primary rpc">RPC</span> New rpc-client version 2.1.0</h4><p>This release has no breaking changes.</p>
<ul>
<li>Added OskariRPC.synchronizerFactory(...) helper for creating one way data-binding for embedded Oskari maps.</li>
<li>New parameter info is given to channel.onReady() callbacks. It&#39;s an object containing two keys, clientSupported signifying that the RPC client version is supported by the embeded map, and version which is the Oskari version in use in the embedded map.</li>
</ul>
<h2 class=>1.49.0</h2><h3 class=add> <span class="label label-primary rpc">RPC</span> AddFeaturesToMapRequest</h3><p>Added a new option <code>animationDuration</code> for animating fill color change on update request.</p>
<h2 class=>1.48.0</h2><h3 class=mod> <span class="label label-primary rpc">RPC</span> AddFeaturesToMapRequest</h3><p>Deprecated following layer related options. Use VectorLayerRequest instead.</p>
<pre><code class="language-javascript">    layerOptions,
    layerInspireName,
    layerOrganizationName,
    showLayer,
    opacity,
    layerName,
    layerDescription,
    layerPermissions
</code></pre>
<h3 class=add> <span class="label label-primary rpc">RPC</span> VectorLayerRequest</h3><p>Request to handle layer settings.</p>
<h2 class=>1.45.0</h2><h3 class=mod> <span class="label label-primary rpc">RPC</span> FeatureEvent</h3><p>is now triggered correctly on published maps/ol3 implementation when layer is cleared with MapModulePlugin.RemoveFeaturesFromMapRequest without parameters.</p>
<h3 class=mod> <span class="label label-primary rpc">RPC</span> DrawTools.StopDrawingRequest</h3><p>A new optional third parameter suppressEvent (boolean).
If true the request doesn&#39;t trigger a DrawingEvent. Defaults to false.</p>
<h3 class=rem> MetaData.FinishedDrawingEvent</h3><p>Event removed from Metadatacatalogue bundle. New parallel version uses DrawTools.StartDrawingRequest and DrawTools.StopDrawingRequest instead to draw search coverage area on map.</p>
<h3 class=mod> MapMoveByLayerContentRequest</h3><p>MapMoveByLayerContentRequest now has a new optional param to zoom to layer extent (requires layer coverage data to be available).</p>
<h3 class=mod> PublishMapEditorRequest</h3><p>Now sets the publisher state as a whole for editing an embedded map instead of assuming for example layers to be adjusted prior to sending the request.</p>
<h3 class=add> new bundle: GeometryCutter</h3><p>Geometrycutter is a more bare bones replacement for the &quot;geometryeditor&quot; bundle. Geometrycutter has only two editing modes:</p>
<ul>
<li>splitting a feature by a user drawn linestring as if it was a cutting &quot;blade&quot;</li>
<li>removing a part of a feature that overlaps a user drawn polygon (difference)</li>
</ul>
<h3 class=rem> <span class="label label-primary breaking">NOT BACKWARDS COMPATIBLE</span> TimeseriesAnimationEvent, AnimateLayerRequest</h3><p>Timeseries functionality rewrite. Old event &amp; request removed.</p>
<h3 class=rem> <span class="label label-primary breaking">NOT BACKWARDS COMPATIBLE</span> mapfull configuration</h3><p>Mapfull no longer receives or handles &quot;globalMapAjaxUrl&quot; and &quot;user&quot; in bundle configuration. Handling has been moved to Oskari.app.init().
If you haven&#39;t implemented a custom version of &quot;mapfull&quot; bundle or the Oskari-global this has no effect.</p>
<h2 class=>1.44.1</h2><h3 class=mod> <span class="label label-primary rpc">RPC</span> DrawingEvent</h3><p>Fixed an issue where:</p>
<ol>
<li>Draw a shape (like Polygon) with functionality id 1</li>
<li>Draw another type of shape (like LineString) with functionality id 2</li>
<li>Draw the same shape as in step 1 with functionality id 3</li>
</ol>
<p>Resulted in DrawingEvents on step 3 to have an empty features array. Features the user draws are now sent correctly.</p>
<p>DrawingEvent with isFinished = true is now correctly triggered also when user modifies the geometry.
Previously isFinished was only ever &quot;true&quot; for the original draw and always false for any modifications.</p>
<p>Length and area information in the event are now the sum for all the LineStrings (for length) and (non-intersecting) Polygons instead of the last drawn shape.
The length/area is written to geojson properties per feature so if you need to access measurement for the latest feature it&#39;s still there like this:</p>
<pre><code class="language-javascript">    {
        data : {
             length : 0,
             area : 39696895.99975586
        },
        geojson : {
            features : [{ geometry: ..., properties : {
                    area : 20396544
                },
                { geometry: ..., properties : {
                    area : 19300351.99975586
                }]
        }
    }
</code></pre>
<p>To get the same information you can do <code>event.geojson.features[event.geojson.features.length - 1].properties.area</code>, but it makes more sense to have the sum on the data block instead of measures for the latest feature in a collection of features.</p>
<p>Notes:</p>
<ul>
<li>If you have just one feature ever this works like before.</li>
<li>Only lines and polygons are counted for the area/length (circles/points with buffers are not).</li>
<li>The measurements are for non-buffered features.</li>
</ul>
<h3 class=add>metadatacatalogue </h3><p>Added new OpenLayers independent version of metadatacatalogue. New bundle.js is under packages/catalogue/metadatacatalogue/. In the new version <code>MetaData.FinishedDrawingEvent</code> is removed. Instead you can listen to <code>DrawingEvent</code> where id &quot;catalogue.bundle.metadatacatalogue&quot; and isFinished is true.</p>
<h2 class=>1.44</h2><h3 class=mod> <span class="label label-primary breaking">NOT BACKWARDS COMPATIBLE</span> AddLayerListFilterRequest</h3><p>Removed function parameter to make request serializable to JSON. The filter function can now be registered to MapLayerService.</p>
<p>Before:</p>
<pre><code class="language-javascript">// Add new layerlist filter button to layerselector
Oskari.getSandbox().postRequestByName(&#39;AddLayerListFilterRequest&#39;,[
    &#39;Publishable&#39;,
    &#39;Show publishable layers&#39;,
    function(layer){
        return (layer.getPermission(&#39;publish&#39;) === &#39;publication_permission_ok&#39;);
    },
    &#39;layer-publishable&#39;,
    &#39;layer-publishable-disabled&#39;,
    &#39;publishable&#39;
]);
</code></pre>
<p>After:</p>
<pre><code class="language-javascript">// Add layer filter to map layer service
var mapLayerService = Oskari.getSandbox().getService(&#39;Oskari.mapframework.service.MapLayerService&#39;);
mapLayerService.registerLayerFilter(&#39;publishable&#39;, function(layer){
    return (layer.getPermission(&#39;publish&#39;) === &#39;publication_permission_ok&#39;);
});

// Add layerlist filter button
Oskari.getSandbox().postRequestByName(&#39;AddLayerListFilterRequest&#39;, [
        &#39;Publishable&#39;,
        &#39;Show publishable layers&#39;,
        &#39;layer-publishable&#39;,
        &#39;layer-publishable-disabled&#39;,
        &#39;publishable&#39;
]);
</code></pre>
<h3 class=mod> <span class="label label-primary breaking">NOT BACKWARDS COMPATIBLE</span> ShowFilteredLayerListRequest</h3><p>Changed <code>stats</code> filter name to <code>featuredata</code> (because it filters featuredata layers and not stats layers). Also made request serializable to JSON (removed function parameter).</p>
<p>Before:</p>
<pre><code class="language-javascript">// Use buil-in filter
Oskari.getSandbox().postRequestByName(&#39;ShowFilteredLayerListRequest&#39;, [null, &#39;stats&#39;]);

// Register new filter and use this
Oskari.getSandbox().postRequestByName(&#39;ShowFilteredLayerListRequest&#39;, [function(layer) {
    var name = layer.getName().toLowerCase();
    return (name.substring(0,1) === &#39;a&#39;);
},&#39;find_layers_name_start_a&#39;, false]);
</code></pre>
<p>After:</p>
<pre><code class="language-javascript">// Use built-in filter
Oskari.getSandbox().postRequestByName(&#39;ShowFilteredLayerListRequest&#39;, [&#39;featuredata&#39;]);

// Register new filter
var mapLayerService = Oskari.getSandbox().getService(&#39;Oskari.mapframework.service.MapLayerService&#39;);
mapLayerService.registerLayerFilter(&#39;find_layers_name_start_a&#39;, function(layer) {
    var name = layer.getName().toLowerCase();
    return (name.substring(0,1) === &#39;a&#39;);
});
// Use new filter by request
Oskari.getSandbox().postRequestByName(&#39;ShowFilteredLayerListRequest&#39;, [&#39;find_layers_name_start_a&#39;, false]);
</code></pre>
<h4 class=mod> <span class="label label-primary breaking">NOT BACKWARDS COMPATIBLE</span> ProgressEvent</h4><p>The event API itself is unchanged, but the only core bundle that sent out the event was not using it according to the API docs. You can ignore this change if your code does not expect ProgressEvent&#39;s getID() method to always return string &#39;maplayer&#39;.</p>
<h4 class=add> TimeseriesAnimationEvent</h4><p>Event is sent out when timeseries animation advances or is stopped</p>
<h4 class=mod> <span class="label label-primary rpc">RPC</span>AddFeaturesToMapRequest</h4><p>New functionalities for <code>AddFeaturesToMapRequest</code>. New options available:</p>
<ul>
<li>layerInspireName : Inspire name for added layer</li>
<li>layerOrganizationName: Organization name for added layer</li>
<li>showLayer: Show layer to layerselector2/layerselection2. If setted truue then show map (add layer to mapservice).</li>
<li>opacity: Added layer opacity</li>
<li>layerName: Added layer name (showed in layerselector2/layerselection2)</li>
<li>layerDescription: Added layer description (showed subtitle in layerselection2)</li>
<li>layerPermissions: Added layer permission</li>
<li>image.sizePx: image icon size in pixels. Used this is size not defined (size is used for Oskari icon size calculation)</li>
</ul>
<h2 class=>1.42</h2><h4 class=mod> <span class="label label-primary rpc">RPC</span> SearchResultEvent</h4><p><code>SearchResultEvent</code> now includes a &quot;region&quot; key for result locations. It should be used instead of &quot;village&quot;. Both are available and have the same value, but the village key will be removed in a future release.</p>
<pre><code class="language-javascript">{
&quot;id&quot;: 0,
&quot;rank&quot;: 10,
&quot;lon&quot;: &quot;327629.273&quot;,
&quot;region&quot;: &quot;Tampere&quot;,
&quot;village&quot;: &quot;Tampere&quot;,
&quot;channelId&quot;: &quot;REGISTER_OF_NOMENCLATURE_CHANNEL&quot;,
&quot;name&quot;: &quot;Tampere&quot;,
&quot;zoomScale&quot;: 56650,
&quot;type&quot;: &quot;Kunta, kaupunki&quot;,
&quot;lat&quot;: &quot;6822513.158&quot;
}
</code></pre>
<h4 class=mod> <span class="label label-primary rpc">RPC</span> FeatureEvent</h4><p><code>FeatureEvent</code> triggered on OpenLayers 2 based map now returns GeoJSON as JSON (previous returned String with escaped JSON).</p>
<h4 class=mod> <span class="label label-primary rpc">RPC</span> New rpc-client version</h4><p>This release has no functional changes.</p>
<p>As part of Oskari becoming an OSGeo-project the repositories are relocated from under <a href="https://github.com/nls-oskari">https://github.com/nls-oskari</a> to <a href="https://github.com/oskariorg">https://github.com/oskariorg</a>.
 This update only updates references in package.json for jschannel fork (dependency) and the RPC-client.</p>
<h2 class=>1.41</h2><h3 class=mod> <span class="label label-primary rpc">RPC</span> RouteResultEvent</h3><p>Now includes the parameters from the request under rawParams key. You can also send an additional id when making the request and the id will be returned under the rawParams. As some routes take longer to determine than others this can be used to detect order of the responses.</p>
<p>Also a RouteResultEvent with success: false is now sent correctly if there&#39;s a network issue or some other internal problem.</p>
<h3 class=mod> <span class="label label-primary rpc">RPC</span> AfterMapMoveEvent</h3><p>The marker flag has been removed as it was misleading. The value was always false.</p>
<h3 class=rem> FeaturesAvailableEvent</h3><p>Event removed as deprecated and unsupported. Use MapModulePlugin.AddFeaturesToMapRequest instead.</p>
<h3 class=mod> AddMapLayerRequest</h3><p>Request only has one parameter: the layer ID. This simplifies layer order handling and makes it work more intuitively.</p>
<h3 class=rem> DimMapLayerRequest, HighlightMapLayerRequest, AfterDimMapLayerEvent and AfterHighlightMapLayerEvent</h3><p>The above requests and events have been merged to &quot;map.layer.activation&quot; request and event. It has a new boolean flag indicating activation/deactivation instead of own events/requests.</p>
<h3 class=rem> AfterShowMapLayerInfoEvent</h3><p>Event removed as backendstatus bundle sent it to itself reacting to ShowMapLayerInfoRequest that it also handles.</p>
<h3 class=rem> CtrlKeyDownRequest and CtrlKeyUpRequest</h3><p>Requests removed as deprecated. These should be events if anything. Oskari.ctrlKeyDown(blnPressed) can be used instead, but it&#39;s deprecated as well.</p>
<h3 class=rem> HideMapMarkerRequest and AfterHideMapMarkerEvent</h3><p>AfterHideMapMarkerEvent was removed as it&#39;s no longer used and is misleading as it was used to notify markerlayer being hidden.
HideMapMarkerRequest was removed as it&#39;s no longer used and is misleading. Use MapModulePlugin.MarkerVisibilityRequest instead.</p>
<h3 class=rem> Printout.PrintWithParcelUIEvent</h3><p>Removed parcel application specific event from printout.</p>
<h2 class=>1.40</h2><h3 class=mod> <span class="label label-primary rpc">RPC</span> InfoBox.ShowInfoBoxRequest</h3><p>Updating existing infibox in mobile mode had timing problems and ended in javascript error and/or popup being closed instead of updated. This has been fixed.</p>
<h3 class=mod> <span class="label label-primary rpc">RPC</span> <span class="label label-primary breaking">NOT BACKWARDS COMPATIBLE</span> feedbackService (Open311)</h3><p>NOTE! Still under construction, this is a POC solution for testing Open311 servers.
For more detailed information, see documentation <a href="http://oskari.org/api/requests">http://oskari.org/api/requests</a>.</p>
<h4 class=>GetFeedbackRequest &amp; PostFeedbackRequest</h4><p>The parameters &quot;getServiceRequests&quot; and &quot;postServiceRequest&quot; are no longer available, but the same content can now be sent with parameter named &quot;payload&quot;.
The payload no longer needs to be JSON.stringified.</p>
<h4 class=>GetFeedbackServiceRequest &amp; GetFeedbackServiceDefinitionRequest</h4><p>The two requests have been merged to GetFeedbackServiceRequest. The request without a parameter results in a FeedbackResultEvent with a listing of services and
 when the request is sent with a parameter with the value of a service code the event will include metadata (service definition) for that single service.</p>
<h2 class=>1.39</h2><h4 class=add> <span class="label label-primary rpc">RPC</span> New MapModulePlugin.MapLayerUpdateRequest Request</h4><p>With the request you can force redraw of layers or update any arbitrary layer parameters, such as a WMS layer&#39;s SLD_BODY.</p>
<p>Note! When OpenLayers3 is used, GET requests longer than 2048 bytes will be automatically transformed to async ajax POST-requests and proxied. Thus the service itself also has to support http POST-method.</p>
<p>OpenLayers2 will always use GET-requests and will fail, if the GET-request&#39;s length exceeds the allowed maximum.</p>
<pre><code class="language-javascript">sandbox.postRequestByName(&#39;MapModulePlugin.MapLayerUpdateRequest&#39;, [layerId, true, {
    SLD_BODY:
        &#39;&lt;StyledLayerDescriptor xmlns=&quot;http://www.opengis.net/sld&quot; xmlns:ogc=&quot;http://www.opengis.net/ogc&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; version=&quot;1.0.0&quot; xsi:schemaLocation=&quot;http://www.opengis.net/sld StyledLayerDescriptor.xsd&quot;&gt;&#39;+
        &#39;    &lt;NamedLayer&gt;&#39;+
        &#39;    &lt;Name&gt;oskari:kunnat2013&lt;/Name&gt;&#39;+
        &#39;    &lt;UserStyle&gt;&#39;+
        &#39;    &lt;Title&gt;SLD Cook Book: Simple polygon&lt;/Title&gt;&#39;+
        &#39;    &lt;FeatureTypeStyle&gt;&#39;+
        &#39;    &lt;Rule&gt;&#39;+
        &#39;    &lt;PolygonSymbolizer&gt;&#39;+
        &#39;    &lt;Fill&gt;&#39;+
        &#39;    &lt;CssParameter name=&quot;fill&quot;&gt;#000080&lt;/CssParameter&gt;&#39;+
        &#39;    &lt;/Fill&gt;&#39;+
        &#39;    &lt;/PolygonSymbolizer&gt;&#39;+
        &#39;    &lt;/Rule&gt;&#39;+
        &#39;    &lt;/FeatureTypeStyle&gt;&#39;+
        &#39;    &lt;/UserStyle&gt;&#39;+
        &#39;    &lt;/NamedLayer&gt;&#39;+
        &#39;    &lt;/StyledLayerDescriptor&gt;&#39;
}]);
</code></pre>
<h3 class=mod> <span class="label label-primary rpc">RPC</span> infobox</h3><p>Fixed an issue where InfoBox.InfoBoxEvent was not sent on close when the map is in mobile mode.</p>
<h2 class=>1.38</h2><h4 class=add> <span class="label label-primary rpc">RPC</span> New MapModulePlugin.MarkerVisibilityRequest Request</h4><p>Use this request to show/hide added marker from map.</p>
<p>Hide wanted marker from map:</p>
<pre><code class="language-javascript">channel.postRequest(&#39;MapModulePlugin.MarkerVisibilityRequest&#39;, [false, &#39;TEST_MARKER_ID&#39;]);
</code></pre>
<p>Hide all markers from map:</p>
<pre><code class="language-javascript">channel.postRequest(&#39;MapModulePlugin.MarkerVisibilityRequest&#39;, [false]);
</code></pre>
<p>Show wanted marker from map:</p>
<pre><code class="language-javascript">channel.postRequest(&#39;MapModulePlugin.MarkerVisibilityRequest&#39;, [true, &#39;TEST_MARKER_ID&#39;]);
</code></pre>
<p>Show all markers from map:</p>
<pre><code class="language-javascript">channel.postRequest(&#39;MapModulePlugin.MarkerVisibilityRequest&#39;, [true]);
</code></pre>
<h4 class=mod> <span class="label label-primary rpc">RPC</span> MapModulePlugin.AddFeaturesToMapRequest</h4><p>If some feature&#39;s style must be updated (for example for highlighting it on click), the first parameter of request should be key-value-object that identifiers the specific feature existing on the map. Request will check if the feature with given property exists on the map and will update its style according to the style given in the options object.</p>
<pre><code class="language-javascript">var featureProperty = {&#39;id&#39;: &#39;F1&#39;}; // key is feature property name, value is the property matching value to style
var options = {
    featureStyle: {
        fill: {
            color: &#39;#ff0000&#39;
        },
        stroke : {
            color: &#39;#ff0000&#39;,
            width: 5
        },
        text : {
            scale : 1.3,
            fill : {
                color : &#39;rgba(0,0,0,1)&#39;
            },
            stroke : {
                color : &#39;rgba(255,255,255,1)&#39;,
                width : 2
            }
        }
    },
    layerId: &#39;VECTOR&#39;
};
channel.postRequest(&#39;MapModulePlugin.AddFeaturesToMapRequest&#39;, [featureProperty, options]);
</code></pre>
<h2 class=>1.37</h2><h3 class=>mapmodule</h3><h4 class=mod> <span class="label label-primary rpc">RPC</span> AddMarkerRequest</h4><p>Improved request to more readably and changed option names.
Custom SVG and external graphic icon properties changed.</p>
<p>External icon changes:</p>
<ul>
<li>iconUrl -property not used any more, use instead shape property</li>
<li>shape -property, tell here external icon url</li>
<li>offsetX, tell here where marker icon center x point should be. If not setted used 16 (center point)</li>
<li>offsetY, tell here where marker icon center y point should be. If not setted used 16 (center point)</li>
</ul>
<p>For example:</p>
<pre><code class="language-javascript">    var MARKER_ID = &quot;external_marker&quot;;
    var data = {
        x: 386020,
        y: 6670057,
        shape: &#39;http://demo.paikkatietoikkuna.fi/Oskari/resources/framework/bundle/mapmodule-plugin/images/marker.png&#39;,
        offsetX: 16, // center point x position from left to right
        offsetY: 0 // center point y position from bottom to up
    };
    channel.postRequest(&#39;MapModulePlugin.AddMarkerRequest&#39;, [data, MARKER_ID]);
</code></pre>
<p>Custom SVG icon changes:</p>
<ul>
<li>shape -property object not needed. Tell here now the svg data, for example <code>&lt;svg&gt;...&lt;/svg&gt;</code></li>
<li>offsetX, tell here where marker icon center x point should be. If not setted used 16 (center point)</li>
<li>offsetY, tell here where marker icon center y point should be. If not setted used 16 (center point)</li>
</ul>
<p>For example:</p>
<pre><code class="language-javascript">    var MARKER_ID = &quot;happy_face_marker&quot;;
    var data = {
            x: 411650.70779123,
            y: 6751897.3481153,
            msg : &#39;&#39;,
            shape: &#39;&lt;svg width=&quot;32&quot; height=&quot;32&quot;&gt;&lt;g fill=&quot;#9955ff&quot; transform=&quot;matrix(0.06487924,0,0,0.06487924,0,1.73024e-6)&quot;&gt;&lt;g&gt;&lt;path d=&quot;M 246.613,0 C 110.413,0 0,110.412 0,246.613 c 0,136.201 110.413,246.611 246.613,246.611 136.2,0 246.611,-110.412 246.611,-246.611 C 493.224,110.414 382.812,0 246.613,0 Z m 96.625,128.733 c 21.128,0 38.256,17.128 38.256,38.256 0,21.128 -17.128,38.256 -38.256,38.256 -21.128,0 -38.256,-17.128 -38.256,-38.256 0,-21.128 17.128,-38.256 38.256,-38.256 z m -196.743,0 c 21.128,0 38.256,17.128 38.256,38.256 0,21.128 -17.128,38.256 -38.256,38.256 -21.128,0 -38.256,-17.128 -38.256,-38.256 0,-21.128 17.128,-38.256 38.256,-38.256 z m 100.738,284.184 c -74.374,0 -138.225,-45.025 -165.805,-109.302 l 48.725,0 c 24.021,39.5 67.469,65.885 117.079,65.885 49.61,0 93.058,-26.384 117.079,-65.885 l 48.725,0 C 385.46,367.892 321.608,412.917 247.233,412.917 Z&quot; /&gt;&lt;/g&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;/g&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;/svg&gt;&#39;,
            offsetX: 16, // center point x position from left to right
            offsetY: 16, // center point y position from bottom to up
            size: 3
        };
        channel.postRequest(&#39;MapModulePlugin.AddMarkerRequest&#39;, [data, MARKER_ID]);
</code></pre>
<p>Old request also working well but user that uses old way request and these properties are informed to warning log messages. <code>Old way requests it&#39;s recommended to switch to the new format.</code></p>
<h2 class=>1.36</h2><h3 class=>infobox</h3><h4 class=mod> <span class="label label-primary rpc">RPC</span> ShowInfoBoxRequest</h4><p><strong>Changes not backwards compatible!</strong></p>
<p>Request is modified to allow giving multiple additional parameters (hidePrevious, colourScheme, font) in one options-object. Request now allows giving mobileBreakpoints as one parameter. MobileBreakpoints means the size of the screen in pixels to start showing infobox in mobile mode.</p>
<p>It is now also possible to define links and buttons to infobox content and give them information that is shown in InfoboxActionEvent when link/button is clicked.</p>
<p>Request is modified also so that infobox can be shown for the marker. This can done by giving marker id instead of lonlat in position-object. If marker id and lon/lat is defined, then infobox is tried to show for marker, if marker is not found then infobox is shown for defined coordinates. If infobox cannot be shown, then it is informed in InfoBox.InfoBoxEvent.</p>
<p>For more detailed information, see <a href="http://oskari.org/api/requests">documentation</a> and <a href="http://oskari.org/examples/rpc-api/rpc_example.html">RPC example</a>.</p>
<p>NOTE! The changes are not backwards compatible! The basic change that should be done in most use cases is to remove hidePrevious-value (true/false) from parameterlist to the options-object. Other changes may also be required. See the updated request-documentation for getting advice to update your requests.</p>
<h3 class=>mapmodule</h3><h4 class=mod> <span class="label label-primary rpc">RPC</span> AddMarkerRequest</h4><p>Improved request to allow add custom svg markers. Custom marker is defined in shape-object.</p>
<pre><code class="language-javascript">    var MARKER_ID = &quot;happy_face_marker&quot;;
    var data = {
            x: 411650.70779123,
            y: 6751897.3481153,
            msg : &#39;&#39;,
            shape: {
                data: &#39;&lt;svg width=&quot;32&quot; height=&quot;32&quot;&gt;&lt;g fill=&quot;#9955ff&quot; transform=&quot;matrix(0.06487924,0,0,0.06487924,0,1.73024e-6)&quot;&gt;&lt;g&gt;&lt;path d=&quot;M 246.613,0 C 110.413,0 0,110.412 0,246.613 c 0,136.201 110.413,246.611 246.613,246.611 136.2,0 246.611,-110.412 246.611,-246.611 C 493.224,110.414 382.812,0 246.613,0 Z m 96.625,128.733 c 21.128,0 38.256,17.128 38.256,38.256 0,21.128 -17.128,38.256 -38.256,38.256 -21.128,0 -38.256,-17.128 -38.256,-38.256 0,-21.128 17.128,-38.256 38.256,-38.256 z m -196.743,0 c 21.128,0 38.256,17.128 38.256,38.256 0,21.128 -17.128,38.256 -38.256,38.256 -21.128,0 -38.256,-17.128 -38.256,-38.256 0,-21.128 17.128,-38.256 38.256,-38.256 z m 100.738,284.184 c -74.374,0 -138.225,-45.025 -165.805,-109.302 l 48.725,0 c 24.021,39.5 67.469,65.885 117.079,65.885 49.61,0 93.058,-26.384 117.079,-65.885 l 48.725,0 C 385.46,367.892 321.608,412.917 247.233,412.917 Z&quot; /&gt;&lt;/g&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;g/&gt;&lt;/g&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;g transform=&quot;translate(0,-461.224)&quot; /&gt;&lt;/svg&gt;&#39;,
                x: 16, // center point x position
                y: 16 // center point y position
            },
            size: 3
        };
        channel.postRequest(&#39;MapModulePlugin.AddMarkerRequest&#39;, [data, MARKER_ID]);
</code></pre>
<h3 class=>feedbackService (Open311)</h3><h4 class=add> <span class="label label-primary rpc">RPC</span> GetFeedbackRequest</h4><p>NOTE! Under construction, this is a POC solution for testing Open311 servers.</p>
<p>Get posted feedback data out of Open311 service.</p>
<p>For more detailed information, see documentation <a href="http://oskari.org/api/requests">http://oskari.org/api/requests</a>.</p>
<h4 class=add> <span class="label label-primary rpc">RPC</span> PostFeedbackRequest</h4><p>NOTE! Under construction, this is a POC solution for testing Open311 servers.</p>
<p>Posts user&#39;s feedback data to the Open311 service.</p>
<p>For more detailed information, see documentation <a href="http://oskari.org/api/requests">http://oskari.org/api/requests</a>.</p>
<h4 class=add> <span class="label label-primary rpc">RPC</span> GetFeedbackServiceRequest</h4><p>NOTE! Under construction, this is a POC solution for testing Open311 servers</p>
<p>Get Open311 feedback service list.</p>
<p>For more detailed information, see documentation <a href="http://oskari.org/api/requests">http://oskari.org/api/requests</a>.</p>
<h4 class=add> <span class="label label-primary rpc">RPC</span> GetFeedbackServiceDefinitionRequest</h4><p>NOTE! Under construction, this is a POC solution for testing Open311 servers</p>
<p>Get the definition of one feedback service.</p>
<p>For more detailed information, see documentation <a href="http://oskari.org/api/requests">http://oskari.org/api/requests</a>.</p>
<h3 class=>RPC</h3><h4 class=add> <span class="label label-primary rpc">RPC</span> New functions</h4><p>setCursorStyle(cursorStyle) - function added. Functionality to change the mouse cursor on the map to any valid cursor css declaration (&#39;crosshair&#39;,&#39;progress&#39; etc.) supported by the browser.</p>
<p>An experimental <strong>getScreenshot()</strong> function is now available when the Oskari instance uses Openlayers 3 based mapmodule.
The function returns an empty string if screenshot could not be produced and a dataURL for png-image when successful.</p>
<p>Usage requires additional configuration on the map layers used on the published map!</p>
<p><strong>GetPixelMeasuresInScale([mm_measure1, mm_measure2,..],scale)</strong> function is now available for requesting pixel values.
Input: array of mm measurements , requested scale (optional) e.g. [[210,297], 100000]
Output: array of pixel measurements , requested scale</p>
<p>Returns pixel mesurements for mm measurements in requested scale.
Use case: Plot paper size area on a map. See plotPlotArea-function in rpc_example.html.
If scale is not entered, function computes fit scale so that paper size area covers the whole map.</p>
<p>New functions to zoom map: zoomIn, zoomOut, zoomTo. All return the current zoomlevel after zooming.</p>
<h2 class=>1.35</h2><h3 class=>RPC</h3><h4 class=mod> <span class="label label-primary rpc">RPC</span> New default event</h4><p>InfoboxActionEvent is now allowed by default.</p>
<p>InfoBox.InfoBoxEvent is now allowed by default.</p>
<h4 class=add> <span class="label label-primary rpc">RPC</span> New event</h4><p>InfoboxActionEvent is used to notify which link/button is clicked in the infobox.</p>
<h4 class=mod> <span class="label label-primary rpc">RPC</span> getAllLayers function modified</h4><p>GetAllLayers now returns also minimum zoom level and maximum zoom level for the layer if layer has them defined.</p>
<pre><code class="language-javascript">    {
        id: layerId,
        opacity: layerOpacity,
        visible: layerVisibility,
        name : layerName,
        minZoom: minZoomLevel,
        maxZoom: maxZoomLevel
    };
</code></pre>
<h4 class=mod> <span class="label label-primary rpc">RPC</span> New rpc-client version</h4><p>The JSChannel dependency has been updated. The old version is not compatible with the new one so rpc-client needs to be updated to 2.0.1.</p>
<p>This fix error when sending more than one paramaeter with null values.</p>
<h4 class=add> <span class="label label-primary rpc">RPC</span> New functions</h4><p>getFeatures(layerId) that gets features as geojson object grouped by layer if layerId===true. If layerId not given, will return array of layerIds.</p>
<p>getInfo(clientVersion) returns generic information about the Oskari instance:</p>
<pre><code class="language-javascript">    {
        &quot;version&quot; : &quot;1.35.0&quot;,
        &quot;clientSupported&quot; : true,
        &quot;srs&quot; : &quot;EPSG:4326&quot;
    }
</code></pre>
<h4 class=mod> <span class="label label-primary rpc">RPC</span> New default request</h4><p>MapModulePlugin.ZoomToFeaturesRequest is now allowed by default.</p>
<p>InfoBox.HideInfoBoxRequest is now allowed by default.</p>
<h3 class=>mapmodule - vectorlayerplugin</h3><h4 class=add> <span class="label label-primary rpc">RPC</span> New request</h4><p>MapModulePlugin.ZoomToFeaturesRequest that zooms the map so specific features are visible in the viewport (only for ol3-based maps).</p>
<h4 class=add> <span class="label label-primary rpc">RPC</span> Vector style improvement</h4><p>Added functionality to provide a label text to vector features with the style object. Either a static text or dynamic labeling by a property of the feature supported.
Two ways of providing a label:</p>
<pre><code class="language-javascript">    {
        &quot;layers&quot;: [
            {
                &quot;id&quot;: &quot;EXAMPLE1&quot;,
                &quot;style&quot;: {
                    &quot;fill&quot;: {
                        &quot;color&quot;: &quot;#ff00ff&quot;
                    },
                    &quot;stroke&quot;: {
                        &quot;color&quot;: &quot;#ff00ff&quot;,
                        &quot;width&quot;: 3
                    },
                    &quot;text&quot;: {
                        &quot;fill&quot;: {
                            &quot;color&quot;: &quot;#0000ff&quot;
                        },
                        &quot;stroke&quot;: {
                            &quot;color&quot;: &quot;#ff00ff&quot;,
                            &quot;width&quot;: 4
                        },
                        &quot;labelText&quot;: &quot;Static text&quot;, //OR
                        &quot;labelProperty&quot;:&quot;feature_property&quot;
                    }
                }
            }
        ]
    }
</code></pre>
<h3 class=>search</h3><h4 class=mod> <span class="label label-primary rpc">RPC</span> SearchRequest</h4><p>The parameter given to the request should be a string that will be used to execute the search (previously an object with &quot;searchKey&quot; property).</p>
<h4 class=mod> <span class="label label-primary rpc">RPC</span> SearchResultEvent</h4><p>The value of &quot;requestParameters&quot; is now the string that was given to SearchRequest.</p>
<h3 class=>drawtools</h3><h4 class=mod> <span class="label label-primary rpc">RPC</span> DrawTools.StartDrawingRequest</h4><p>&#39;showMeasure&#39; parameter in optional object parameter has been renamed to &#39;showMeasureOnMap&#39; (if true - measure result will be displayed on map near feature. Default is false.)</p>
<p>Changes to polygon drawing where the polygon intersects with itself. This is by default considered an invalid geometry and as such the geometry is not sent with the event.</p>
<h4 class=mod> <span class="label label-primary rpc">RPC</span> DrawingEvent</h4><p>Values of geojson and data.bufferedGeoJson are now proper JSON structures instead of strings with escaped JSON.</p>
<h2 class=>1.34</h2><p>Initial api version</p>
<hr>
<p>The file structure is</p>
<h2 class=>Oskari version</h2><h3 class=>Affected bundle/API definition</h3><h4 class=>[tags] API functionality that changes</h4><p>Description about the API change</p>
