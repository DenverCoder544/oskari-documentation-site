<h1 id="getuserlocationrequest-rpc">GetUserLocationRequest <span class="label label-primary rpc">RPC</span></h1>
<p>Get user&#39;s location</p>
<h2 id="use-cases">Use cases</h2>
<ul>
<li>Center map to user&#39;s location</li>
</ul>
<h2 id="description">Description</h2>
<p>This request is used to get user&#39;s geolocation. After the geolocation is completed a <code>UserLocationEvent</code> is triggered where following data is available:</p>
<ul>
<li>event.getLon(), tells user geolocation lon coordinate</li>
<li>event.getLat(), tells user geolocation lat coordinate</li>
</ul>
<h2 id="parameters">Parameters</h2>
<p>(* means the parameter is required)</p>
<table class="table">
<tr>
  <th> Name</th><th> Type</th><th> Description</th><th> Default value</th>
</tr>
<tr>
  <td> centerMap </td><td> Boolean </td><td> true if map should be centered to user's location</td><td> false</td>
</tr>
<tr>
  <td> options</td><td> Object</td><td> Parameters for options-object are listed in the next table</td><td></td>
</tr>
</table>

<p>Parameters for options-object:</p>
<table class="table">
<tr>
  <th> Name</th><th> Type</th><th> Description</th><th> Default value</th>
</tr>
<tr>
  <td> addToMap</td><td> Boolean</td><td> If true adds user location to the map. The location (point) is added to vector layer with circle (polygon) expressing the location accuracy.</td><td> false</td>
</tr>
<tr>
  <td> zoomLevel</td><td> Number</td><td> used with centerMap to get desired zoom level. Note that overrides accuracy based zooming (enableHighAccuracy). </td><td> 6</td>
</tr>
<tr>
  <td> enableHighAccuracy</td><td> Boolean</td><td> true to receive the best possible location results. If used with centerMap then zoom level is adjusted according to location accuracy. </td><td> false</td>
</tr>
<tr>
  <td> timeout</td><td> Number</td><td> Maximum length of time (in milliseconds) the device is allowed to take in order to return a position</td><td> 6000</td>
</tr>
<tr>
  <td> maximumAge</td><td> Number</td><td> Maximum age in milliseconds of a possible cached position. If set to 0 tries to attempt real (not cached) position.</td><td> 0</td>
</tr>
</table>

<h2 id="examples">Examples</h2>
<p>Get user geolocation and center map to user location:</p>
<pre><code class="language-javascript">var sb = Oskari.getSandbox();
var reqBuilder = sb.getRequestBuilder(&#39;MyLocationPlugin.GetUserLocationRequest&#39;);
if (reqBuilder) {
    var request = reqBuilder(true);
    sb.request(&#39;MainMapModule&#39;, request);
}
</code></pre>
<p>Get user geolocation and not center map to user location:</p>
<pre><code class="language-javascript">var sb = Oskari.getSandbox();
var reqBuilder = sb.getRequestBuilder(&#39;MyLocationPlugin.GetUserLocationRequest&#39;);
if (reqBuilder) {
    var request = reqBuilder(false);
    sb.request(&#39;MainMapModule&#39;, request);
}
</code></pre>
<p>Get accurate user location, add the location to the map and center the map to the location:</p>
<pre><code class="language-javascript">var options = {
    enableHighAccuracy: true,
    timeout: 15000,
    addToMap: true
};
Oskari.getSandbox().postRequestByName(&#39;MyLocationPlugin.GetUserLocationRequest&#39;, [true, options]);
</code></pre>
<p>Remove user location from the map:</p>
<pre><code class="language-javascript">Oskari.getSandbox().postRequestByName(&#39;MapModulePlugin.RemoveFeaturesFromMapRequest&#39;, [null, null, &#39;USER_LOCATION_LAYER&#39;]);
</code></pre>
<h2 id="related-api">Related api</h2>
<ul>
<li>UserLocationEvent</li>
<li>AddFeaturesToMapRequest</li>
<li>RemoveFeaturesFromMapRequest</li>
</ul>
<p><em>Included in bundle: <a href="bundles#2.13.1/mapping/mapmodule">mapping/mapmodule</a></em></p>
