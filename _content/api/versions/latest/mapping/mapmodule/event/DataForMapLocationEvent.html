<h1 id="dataformaplocationevent-rpc">DataForMapLocationEvent <span class="label label-primary rpc">RPC</span></h1>
<p>Notifies application that a click on the map resulted in more data for that location (GFI style content).</p>
<h2 id="description">Description</h2>
<p>The event allows applications to get programmatic access to the content that is normally shown on the map in an <code>infobox</code> popup when the user clicks the map (GFI/wfs feature clicks). Event includes information about the click coordinates and content of the GFI response.</p>
<p>Note! This event is triggered for each layer and vector feature that is hit. You can detect if the events are from the same click by comparing coordinates</p>
<h2 id="parameters">Parameters</h2>
<p>(* means the parameter is required)</p>
<table class="table">
<tr>
  <th> Name</th><th> Type</th><th> Description</th><th> Default value</th>
</tr>
<tr>
  <td> \* x</td><td> Number </td><td> clicked x coordinate </td><td> </td>
</tr>
<tr>
  <td> \* y </td><td> Number </td><td> clicked y coordinate </td><td> </td>
</tr>
<tr>
  <td> \* content </td><td> String/Object </td><td> GFI content </td><td> </td>
</tr>
<tr>
  <td> \* layerId </td><td> Integer </td><td> Layer id which reposonse come </td><td> </td>
</tr>
<tr>
  <td> \* type </td><td> String </td><td> GFI response type, can be: json, geojson, text </td><td> </td>
</tr>
</table>

<h2 id="rpc">RPC</h2>
<p>Event occurs when GFI response come.</p>
<pre class="event-code-block">
<code>
{
  "content": "<table><tr><td>test</td></tr></table>", // or json object
  "x": 423424,
  "y": 6652055,
  "layerId": 1,
  "type": "text" // or json or geojson
}
</code>
</pre>

<h2 id="event-methods">Event methods</h2>
<h3 id="getname">getName()</h3>
<p>Returns name of the</p>
<h3 id="getx">getX()</h3>
<p>Returns x coordinate</p>
<h3 id="gety">getY()</h3>
<p>Returns y coordinate</p>
<h3 id="getcontent">getContent()</h3>
<p>Returns content, can be: json, geojson or text</p>
<h3 id="getlayerid">getLayerId()</h3>
<p>Returns GFI response layer id</p>
<h3 id="gettype">getType()</h3>
<p>Returns content type, can be: json, geojson or text</p>
<h3 id="getparams">getParams()</h3>
<p>Returns object including all the parameters, for example:</p>
<pre class="event-code-block">
<code>
{
    x: this.getX(),
    y: this.getY(),
    content: this.getContent(),
    layerId: this.getLayerId(),
    type: this.getType()
};
</code>
</pre>

<h2 id="examples">Examples</h2>
<p>GetInfoPlugin send DataForMapLocationEvent:</p>
<pre class="event-code-block">
<code>
var dataForMapLocationEvent = Oskari.eventBuilder(
    'DataForMapLocationEvent'
)(data.lonlat.lon, data.lonlat.lat, content, feature.layerId, type);
this.getSandbox().notifyAll(dataForMapLocationEvent);
</code>
</pre>


<p><em>Included in bundle: <a href="bundles#latest/mapping/mapmodule">mapping/mapmodule</a></em></p>
