<h1 id="featureevent-rpc">FeatureEvent <span class="label label-primary rpc">RPC</span></h1>
<p>Used to notify about add, remove, update and click events for features.</p>
<h2 id="description">Description</h2>
<p>Notifies other components that feature has been added, removed, updated (highlight) or clicked on the map.</p>
<h2 id="rpc">RPC</h2>
<p>Occurs after adding or removing features to or from map, or after feature has been clicked.</p>
<pre class="event-code-block">
<code>
{
  "operation": "add",
  "features": [
    {
      "id": "F24",
      "geojson": {
        "type": "FeatureCollection",
        "features": [
          {
            "type": "Feature",
            "id": "F24",
            "geometry": {
              "type": "LineString",
              "coordinates": [
                [
                  488704,
                  6939136
                ],
                [
                  588704,
                  7039136
                ]
              ]
            },
            "properties": {
              "test_property": 1,
              "oskari-cursor": "zoom-in",
              "highlighted": false // or true. This property come from when update feature
            }
          }
        ]
      },
      "layerId": "VECTOR"
    },
    {
      "id": "F25",
      "geojson": {
        "type": "FeatureCollection",
        "features": [
          {
            "type": "Feature",
            "id": "F25",
            "geometry": {
              "type": "Point",
              "coordinates": [
                488704,
                6939136
              ]
            },
            "properties": {
              "test_property": 2
            }
          }
        ]
      },
      "layerId": "VECTOR"
    }
  ]
}
</code>
</pre>

<h2 id="event-methods">Event methods</h2>
<h3 id="setopadd">setOpAdd()</h3>
<p>Sets this._operation to &#39;add&#39; and returns this</p>
<h3 id="setopremove">setOpRemove()</h3>
<p>Sets this._operation to &#39;remove&#39; and returns this</p>
<h3 id="setopclick">setOpClick()</h3>
<p>Sets this._operation to &#39;click&#39; and returns this</p>
<h3 id="setopzoom">setOpZoom()</h3>
<p>Sets this._operation to &#39;zoom&#39; and returns this</p>
<h3 id="getname">getName()</h3>
<p>Returns event name</p>
<h3 id="addfeatureid-geojson-layerid">addFeature(id, geojson, layerId)</h3>
<p>Adds feature parameters to this._features and returns this</p>
<h3 id="getparams">getParams</h3>
<p>RPC needed function. Returns an object with keys &#39;features&#39; and &#39;operation&#39; where operation is one of: &#39;add&#39;, &#39;remove&#39;, &#39;click&#39;, &#39;zoom&#39; and
features is an array containing objects presenting the features that were affected. Each feature object has the following properties:</p>
<ul>
<li>id : id for the feature</li>
<li>geojson : the feature with attributes as geojson</li>
<li>layerId : id of the layer that the feature is/was on</li>
</ul>
<h2 id="examples">Examples</h2>
<p>VectorLayerPlugin adds feature to clickEvent after feature has been clicked on the map and notifies other components about it.</p>
<pre class="event-code-block">
<code>
__featureClicked: function(features, olLayer) {
    var sandbox = this.getSandbox();
    var clickEvent = sandbox.getEventBuilder('FeatureEvent')().setOpClick();
    var formatter = this._supportedFormats['GeoJSON'];
    var me = this;
    _.forEach(features, function (feature) {
        var geojson = formatter.write([feature]);
        clickEvent.addFeature(feature.id, geojson, me._getLayerId(olLayer.name));
    });
    sandbox.notifyAll(clickEvent);
},
</code>
</pre>

<p><em>Included in bundle: <a href="bundles#latest/mapping/mapmodule">mapping/mapmodule</a></em></p>
