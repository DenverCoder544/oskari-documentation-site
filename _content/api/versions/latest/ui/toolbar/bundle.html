<h1 id="toolbar">toolbar</h1>
<p>Generic and extensible toolbar implementation</p>
<h2 id="description">Description</h2>
<p>The toolbar bundle provides a common interface for other bundles to add and manipulate tool buttons to a common toolbar. Bundles can add, remove, disable and enable buttons in the toolbar. The toolbar is rendered to a HTML element with id &quot;toolbar&quot;. The bundle doesn&#39;t create it but assumes it exists on the page.</p>
<h2 id="todo">TODO</h2>
<ul>
<li>Currently toolbar has a set of default buttons. These should be added by other bundles instead of configuration for preventing buttons.</li>
<li>Handling missing for disabling an active tool (selected tool is disabled through request)</li>
</ul>
<h2 id="screenshot">Screenshot</h2>
<p><img src="/apires/latest/ui/toolbar/toolbar.png" alt="screenshot"></p>
<h2 id="bundle-configuration">Bundle configuration</h2>
<p>Toolgroups and tools can be excluded from being added by default.</p>
<p>In the example below, all tools are excluded from the toolbar.</p>
<pre><code class="language-javascript">&quot;conf&quot;: {
  &quot;history&quot;: {
    &quot;reset&quot;: false,
    &quot;history_back&quot;: false,
    &quot;history_forward&quot;: false
  },
  &quot;basictools&quot;: {
    &quot;zoombox&quot;: false,
    &quot;select&quot;: false,
    &quot;measureline&quot;: false,
    &quot;measurearea&quot;: false
  },
  &quot;viewtools&quot;: {
    &quot;link&quot;: false,
    &quot;print&quot;: false
  }
}
</code></pre>
<p>The following example also excludes all the tools from the toolbar, by setting all groups to false.</p>
<pre><code class="language-javascript">&quot;conf&quot;: {
  &quot;history&quot;: false,
  &quot;basictools&quot;: false,
  &quot;viewtools&quot;: false
}
</code></pre>
<p>A toolbar can also contain color configs:</p>
<pre><code class="language-javascript">&quot;conf&quot;: {
  &quot;colours&quot;: {
    &quot;hover&quot;: &quot;#ff0000&quot;,
    &quot;background&quot;: &quot;#00ff00&quot;
  }
}

Hover color is used when hovering icon and Toolbar.ToolbarRequest add operation data not contains color configuration.

Background color is now only used to calculate light/dark icon classes.
Configuration is used when Toolbar.ToolbarREquest add operation data not contains color configuration. 

## Bundle state

```javascript
state : {
  selected : {
    id : &#39;&lt;id for the selected button&gt;&#39;,
    group: &#39;&lt;group for the selected button&gt;&#39;
  }
}
</code></pre>
<h2 id="requests-the-bundle-sends-out">Requests the bundle sends out</h2>
<p>Currently default buttons send out requests but these should be defined in bundles that use toolbar.</p>
<table class="table">
  <tr>
    <th>Request</th><th>Why/when</th>
  </tr>
  <tr>
    <td> ToolSelectionRequest </td><td> tbd</td>
  </tr>
  <tr>
    <td> StateHandler.SetStateRequest </td><td> tbd</td>
  </tr>
  <tr>
    <td> ClearHistoryRequest </td><td> tbd</td>
  </tr>
</table>

<h2 id="dependencies">Dependencies</h2>
<p>Depends on an element with id &quot;toolbar&quot; to be present on DOM.
Print and link buttons require mapfull bundle, Oskari.userinterface.component.Popup and Oskari.userinterface.component.Button from divmanazer bundle.</p>
<table class="table">
  <tr>
    <th>Dependency</th><th>Linked from</th><th>Purpose</th>
  </tr>
  <tr>
    <td> [jQuery](http://api.jquery.com/) </td>
    <td> Version 1.7.1 assumed to be linked (on page locally in portal) </td>
    <td> Used to create tool buttons/HTML</td>
  </tr>
</table>


<h2 id="requests-that-the-bundle-handles">Requests that the bundle handles</h2>
<table class="table"><tr><th> Request </th><th> Use </th></tr>
<tr><td><a href="requests#latest/ui/toolbar/request/Toolbar.AddToolButtonRequest.md">Toolbar.AddToolButtonRequest</a></td><td>Requests for toolbar to add button with given config</td></tr><tr><td><a href="requests#latest/ui/toolbar/request/Toolbar.RemoveToolButtonRequest.md">Toolbar.RemoveToolButtonRequest</a></td><td>Requests for toolbar to remove button with given id/group</td></tr><tr><td><a href="requests#latest/ui/toolbar/request/Toolbar.SelectToolButtonRequest.md">Toolbar.SelectToolButtonRequest</a></td><td>Requests for toolbar to act as if user had clicked a button or returns a default tool if create params aren't given.</td></tr><tr><td><a href="requests#latest/ui/toolbar/request/Toolbar.ToolbarRequest.md">Toolbar.ToolbarRequest</a></td><td>Requests for toolbar to create/show/hide/remove a toolbar.</td></tr><tr><td><a href="requests#latest/ui/toolbar/request/Toolbar.ToolButtonStateRequest.md">Toolbar.ToolButtonStateRequest</a></td><td>Requests for toolbar to enable/disable a button.</td></tr></table>


<h2 id="events-that-the-bundle-sends">Events that the bundle sends</h2>
<table class="table"><tr><th> Event </th><th> Use </th></tr>
<tr><td><a href="events#latest/ui/toolbar/event/Toolbar.ToolbarLoadedEvent.md">Toolbar.ToolbarLoadedEvent</a></td><td>Used to notify components that the toolbar has been loaded and is available for tool button addition requests.</td></tr><tr><td><a href="events#latest/ui/toolbar/event/Toolbar.ToolSelectedEvent.md">Toolbar.ToolSelectedEvent</a></td><td>Used to notify components that a tool has been selected and components should cancel their tool related operations if any.</td></tr></table>
