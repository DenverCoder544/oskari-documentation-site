<h1 id="wfsvector">wfsvector</h1>
<h2 id="description">Description</h2>
<p>WfsVectorLayerPlugin is an alternative implementation of mapwfs2 that uses MVT vector tiles or geojson as data transfer mechanism. 
Requires module <code>control-mvt</code> to be in use in the backend. Currently supports functionalities:</p>
<ul>
<li>Displays WFS layer features on the map</li>
<li>Shows feature infobox on click</li>
<li>Notifies with events about currently visible feature properties (shown by Featuredata2 bundle in Feature Data flyout)</li>
<li>Allows feature selection by feature id (WFSFeaturesSelectedEvent) or by geometry filter (WFSSetFilter)</li>
<li>Temporary click interaction disabling (ActivateHighlightRequest)</li>
<li>Layer styling</li>
<li>Feature selection based on feature properties (WFSSetPropertyFilter)</li>
</ul>
<p>Does not support:</p>
<ul>
<li>No special handling for &quot;Manual refresh&quot; type layers</li>
<li>Sending of clicked feature geometry as event</li>
</ul>
<h2 id="screenshot">Screenshot</h2>
<p><img src="/apires/2.13.1/mapping/wfsvector/wfslayer.png" alt="screenshot"></p>
<h2 id="plugin-config">Plugin config</h2>
<table class="table">
  <tr>
    <th>Property</th><th>Value type</th>
  </tr>
  <tr>
    <td>renderMode</td><td>"mvt"|"vector"</td>
    <td>origin</td><td>number[2]</td>
    <td>resolutions</td><td>number[]</td>
    <td>tileSize</td><td>number</td>
    <td>minZoomLevel</td><td>number</td>
  </tr>
</table>

<pre><code class="language-javascript">{
  &quot;renderMode&quot;: &quot;mvt&quot;,
  &quot;origin&quot;: [-548576, 8388608],
  &quot;resolutions&quot;: [8192, 4096, 2048, 1024, 512, 256, 128, 64, 32, 16, 8, 4, 2, 1, 0.5, 0.25],
  &quot;tileSize&quot;: 256,
  &quot;minZoomLevel&quot;: 7
}
</code></pre>
<h2 id="requests-the-plugin-handles">Requests the plugin handles</h2>
<table class="table">
  <tr>
    <th>Request</th><th>How does the bundle react</th>
  </tr>
  <tr>
    <td>WfsLayerPlugin.ActivateHighlightRequest</td><td>Disbale/enable map click selection interaction for WFS layers</td>
  </tr>
</table>

<h2 id="requests-the-plugin-sends-out">Requests the plugin sends out</h2>
<table class="table">
  <tr>
    <th>Request</th><th>Why/when</th>
  </tr>
  <tr>
    <td> InfoBox.ShowInfoBoxRequest </td><td> Show clicked feature properties </td>
  </tr>
</table>

<h2 id="events-the-bundle-listens-to">Events the bundle listens to</h2>
<table class="table">
  <tr>
    <th> Event </th><th> How does the bundle react</th>
  </tr>
  <tr>
    <td> AfterMapMoveEvent </td><td> Updates feature properties visible. </td>
  </tr>
  <tr>
    <td> AfterMapLayerAddEvent </td><td> Registers layer with WFS service. </td>
  </tr>
  <tr>
    <td> AfterMapLayerRemoveEvent </td><td> Removes layer from WFS service. </td>
  </tr>
  <tr>
    <td> WFSFeaturesSelectedEvent </td><td> Updates layer style to reflect selection. </td>
  </tr>
  <tr>
    <td> MapClickedEvent </td><td> Open infobox or hilight feature (control-click) </td>
  </tr>
  <tr>
    <td> MapLayerVisibilityChangedEvent </td><td> Update layer visibility. </td>
  </tr>
  <tr>
    <td> AfterChangeMapLayerOpacityEvent </td><td> Update layer opacity. </td>
  </tr>
  <tr>
    <td> WFSSetFilter </td><td> Apply geometry filter and select features. </td>
  </tr>
</table>

<h2 id="dependencies">Dependencies</h2>
<table class="table">
  <tr>
    <th>Dependency</th><th>Linked from</th><th>Purpose</th>
  </tr>
  <tr>
    <td> [Oskari infobox](/documentation/bundles/framework/infobox) </td>
    <td> Oskari's InfoBoxBundle </td>
    <td> That handles the infobox as an Openlayers popup with customized UI</td>
  </tr>
</table>


<h2 id="requests-that-the-bundle-handles">Requests that the bundle handles</h2>
<table class="table"><tr><th> Request </th><th> Use </th></tr>
<tr><td><a href="requests#2.13.1/mapping/wfsvector/request/WfsLayerPlugin.ActivateHighlightRequest.md">WfsLayerPlugin.ActivateHighlightRequest</a></td><td>Requests a WFS highlight enabled or disabled</td></tr></table>


<h2 id="events-that-the-bundle-sends">Events that the bundle sends</h2>
<table class="table"><tr><th> Event </th><th> Use </th></tr>
<tr><td><a href="events#2.13.1/mapping/wfsvector/event/WFSFeatureEvent.md">WFSFeatureEvent</a></td><td>Notifies about received WFS feature properties data</td></tr><tr><td><a href="events#2.13.1/mapping/wfsvector/event/WFSFeaturesSelectedEvent.md">WFSFeaturesSelectedEvent</a></td><td>Used to indicate that a WFS Feature has been selected and components should highlight it in UI</td></tr><tr><td><a href="events#2.13.1/mapping/wfsvector/event/WFSPropertiesEvent.md">WFSPropertiesEvent</a></td><td>Notifies about WFS feature properties field names
 </td></tr></table>
