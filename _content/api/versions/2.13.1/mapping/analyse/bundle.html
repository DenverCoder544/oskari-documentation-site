<h1 id="analyse">analyse</h1>
<h2 id="description">Description</h2>
<p>Bundle manages analyse parameter and data setups, requests analyse execute actions and stores analyse results to DB through backend action route.</p>
<h2 id="screenshot">Screenshot</h2>
<p><img src="/apires/2.13.1/mapping/analyse/analyse.png" alt="screenshot"></p>
<h2 id="bundle-configuration">Bundle configuration</h2>
<p>No configuration is required.</p>
<h2 id="bundle-state">Bundle state</h2>
<pre><code class="language-javascript">state : {
  layerId : &quot;&lt;id of the analysis layer or WFS layer&gt;&quot;,
  method : &quot;&lt;analyse method&gt;&quot;,
  params : &quot;&lt;{buffer_size, intersector, aggregate_function}&gt;&quot;,
  styles : &quot;&lt;{}&gt;&quot;,
  propertymode : &quot;&lt;all|none|columns&gt;&quot;,
  columns : &quot;&lt;column names, when propertymode is columns&gt;&quot;
}
</code></pre>
<h2 id="requests-the-bundle-sends-out">Requests the bundle sends out</h2>
<table class="table">
  <tr>
    <th>Request</th><th>Why/when</th>
  </tr>
  <tr>
    <td>`userinterface.AddExtensionRequest`</td><td>Extends the basic UI view.</td>
  </tr>
</table>

<h3 id="analyse-view">Analyse view</h3>
<table class="table">
  <tr>
    <th>Request</th><th>Why/when</th>
  </tr>
  <tr>
    <td>`userinterface.UpdateExtensionRequest`</td><td>Extends the basic UI view.</td>
  </tr>
  <tr>
    <td>`catalogue.ShowMetadataRequest`</td><td>layer metadata info request</td>
  </tr>
  <tr>
    <td>`DisableMapKeyboardMovementRequest`</td><td>for text input in flyout</td>
  </tr>
  <tr>
    <td>`EnableMapKeyboardMovementRequest`</td><td>for text input in flyout</td>
  </tr>
</table>

<h2 id="events-the-bundle-listens-to">Events the bundle listens to</h2>
<table class="table">
  <tr>
    <th>Event</th><th>How does the bundle react</th>
  </tr>
  <tr>
    <td>`userinterface.ExtensionUpdatedEvent`</td>
    <td>Enters/exits the analysis mode.</td>
  </tr>
  <tr>
    <td>`AfterMapLayerAddEvent`</td>
    <td>Refreshes the data panel</td>
  </tr>
  <tr>
    <td>`AfterMapLayerRemoveEvent`</td>
    <td>Refreshes the data panel</td>
  </tr>
</table>

<h2 id="dependencies">Dependencies</h2>
<table class="table">
  <tr>
    <th>Dependency</th><th>Linked from</th><th>Purpose</th>
  </tr>
  <tr>
    <td> [jQuery](http://api.jquery.com/) </td>
    <td> Version 1.7.1 assumed to be linked on the page</td>
    <td> Used to create the UI</td>
  </tr>
  <tr>
    <td> [OpenLayers](http://openlayers.org/) </td>
    <td> Expects OpenLayers already to be linked </td>
    <td> Temp feature drawing and selected geometry editing</td>
  </tr>
  <tr>
    <td> [Oskari mapmodule](/documentation/bundles/framework/mapmodule)</td>
    <td> Expects to be present in the application setup </td>
    <td> To gain control to OpenLayers map</td>
  </tr>
  <tr>
    <td> [Oskari mapanalysis](/documentation/bundles/framework/mapanalysis)</td>
    <td> Expects to be present in the application setup</td>
    <td> Needed to support the ANALYSIS layer type.</td>
  </tr>
</table>
